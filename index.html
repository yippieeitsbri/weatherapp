<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App 2</title>
   <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />
    <script src="https://kit.fontawesome.com/474b7faebb.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<style>
        body{
            background: linear-gradient(to top, #fff1eb 0%, #ace0f9 100%);
            background-repeat: no-repeat;
            background-attachment: fixed; 
            background-size: cover;
            font-family: 'Kaisei Tokumin', serif;
          
            }
        h1 {
            display: inline-block; 
        color: blue;
          font-family: 'Kaisei Tokumin', serif;
        }
        h2 {
          font-size: 50px;
          color: blue;
          font-weight: bold;
          display: inline-block;
        }
        h4 {
           display: inline-block; 
           color: blue;
           vertical-align: super
            
        }
        h5 {
          color: blue;
          
        }
        h6 {
         color: black;
       
        }
        ul {
        list-style-type: none;
        
        }
        .container {
        
        border: 10px solid white;
        border-radius: 20px;
	      width: 75%;
        }
        
        .style {
          font-size: 10px;
        }
        .now {
            font-size: 50px;
            margin: 0;
            padding: 0;
        }
        .emoji {
            font-size: 30px;
        }
        .weekday,
        .time {
          font-size: 18px;
          font-weight: bold;
        }
        .unit {
           font-size: 18px; 
        }
        .sky,
        .humid,
        .rain,
        .wind {
          font-size: 18px;
        }
        
        .search,
        .current-location {
            
            border: 4px solid;
            border-color: white;
            background: linear-gradient(to top, #fff1eb 0%, #ace0f9 100%);
            padding: 5px 15px;
            border-radius: 10px;
            font-size: 15px;
            color: black;
            transition: all 200ms ease-in-out;
          }
        .search:hover,
        .current-location:hover{
            
            border: 5px solid;
            border-color: #ace0f9;
            background: linear-gradient(to top, #fff1eb 0%, #ace0f9 100%);
            padding: 5px 15px;
            border-radius: 10px;
            font-size: 15px;
            color: #ace0f9;
            transition: all 200ms ease-in-out;
}


</style>


<body>
 <center><strong>
  
<div class="container">
  <div class="row">
    <div class="col-4"><br>
      <h1>Laguna Beach</h1>
      
    </div>

 <div class="date" id="current-date"></div>
<span class="weekday" id="weekday"> </span>	
<span class="time" id="time"> </span>
</strong>

    <span>
      <img src="https://ssl.gstatic.com/onebox/weather/64/cloudy.png"
                  alt="sky"
                  id="icon"
                  class="now"
                />
       <br>
        <h2>75Â°F</h2></span>
        
        
   
    <br><br>
      <ul><em>
        <h6>High: 77Â°F 
           Low: 52Â°F</h6>
        <li class="sky" id="sky">Partly cloudy</li>
        <li class="humid" id="humid">Humidity: </li>
        <li class="wind" id="wind">Wind: mph</li>
        </em></ul>

    </span>
  </div>
</div>

  

<br>
  <div class="container">
  <div class="weather-forecast" id="forecast">
    <div class="row">
<div class="col-2">
<div class="weather-forecast-date">Monday</div>
<img src="http://openweathermap.org/img/wn/50d@2x.png"
                  alt=""
                  width="42"
                />
<div class="weather-forecast-temperature">
  <span class="weather-forecast-temperature-max">79Â°F</span>    
  <span class="weather-forecast-temperature-min">49Â°F</span>  
   </div>
   </div>
   </div>
   </div>
    <div class="col">
        <p><strong>Tuesday</strong> 
            <br>
      <span class="emoji">â˜€ï¸</span>
      <h5>79Â°F</h5>
      <h6>55Â°F</h6>
    </div>
    <div class="col">
        <p><strong>Wednesday</strong> 
            <br>
     <span class="emoji">â˜€ï¸</span>
      <h5>79Â°F</h5>
      <h6>55Â°F</h6>
    </div>
     <div class="col">
         <p><strong>Thursday</strong> 
            <br>
     <span class="emoji">â˜€ï¸</span>
      <h5>79Â°F</h5>
      <h6>55Â°F</h6>
    </div>
    <div class="col">
        <p><strong>Friday</strong> 
            <br>
      <span class="emoji">â˜€ï¸</span>
      <h5>79Â°F</h5>
      <h6>55Â°F</h6>
    </div>
    <div class="col">
        <p><strong>Saturday</strong> 
            <br>
      <span class="emoji">â˜€ï¸</span>
      <h5>79Â°F</h5>
      <h6>55Â°F</h6>
    </div>
     </div>     
        </div>  
<br><center>
 <button type="submit" class="current-location">Current LocationğŸ“</button> 
<p><form>
  <input type="text" 
  placeholder="Search New City" 
  autocomplete="off"
  autofocus="on"
  id="search-text-input" />
  <button type="submit" class="search">Search ğŸ”</button>
   </form>
</center>

<script>
let now = new Date();
let time = document.querySelector("time");
let date = now.getDate();
let year = now.getFullYear();
let hours = now.getHours();
let todayMinute = now.getMinutes();
if (todayMinute < 10) {
  todayMinute = `0${todayMinute}`;
}
window.onload = function() {
  clock();  
    function clock() {
    var now = new Date();
    var TwentyFourHour = now.getHours();
    var hour = now.getHours();
    var min = now.getMinutes();
    var sec = now.getSeconds();
    var mid = 'pm';
    if (min < 10) {
      min = "0" + min;
    }
    if (hour > 12) {
      hour = hour - 12;
    }    
    if(hour==0){ 
      hour=12;
    }
    if(TwentyFourHour < 12) {
       mid = 'am';
    }     
  document.getElementById('time').innerHTML =     hour+':'+min+':'+sec +' '+mid ;
    setTimeout(clock, 1000);
    }
}



let days = [
  "Sunday",
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday"
];
let day = days[now.getDay()];

let months = [
  "January",
  "Feburary",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December"
];
let month = months[now.getMonth()];
let weekday = document.querySelector("#weekday");

weekday.innerHTML = `${day} | ${month} ${date}, ${year} | `;

function search(event) {
  event.preventDefault();
  let searchInput = document.querySelector("#search-text-input");
  let h1 = document.querySelector("h1");
  if (searchInput.value !== "") {
    h1.innerHTML = `${searchInput.value}`;
    let apiKey = "bf54175800a55e59e6c4d6461deeef12";
    let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${searchInput.value}&appid=${apiKey}&units=imperial`;
    axios.get(apiUrl).then(showTemperature);
  } else {
    h1.innerHTML = `Please enter a city!`;
  }
}

let form = document.querySelector("form");
form.addEventListener("submit", search);

function showTemperature(response) {
  let h1 = document.querySelector("h1");
  h1.innerHTML = response.data.name;
  
  let sky = response.data.weather[0].main;
  let skyElement = document.querySelector("#sky");
  skyElement.innerHTML = `Sky: ${sky}`;

  let temperature = Math.round(response.data.main.temp);
  let humid = Math.round(response.data.main.humidity);
  let humidElement = document.querySelector("#humid");
  humidElement.innerHTML = `Humidity: ${humid}%`;

  let wind = Math.round(response.data.wind.speed);
  let windElement = document.querySelector("#wind");
  windElement.innerHTML = `Wind: ${wind} mph`;

  let iconElement = document.querySelector("#icon");
  iconElement.setAttribute("src",`http://openweathermap.org/img/wn/${response.data.weather[0].icon}@2x.png`);
  iconElement.setAttribute("alt", response.data.weather[0].description);

  let h2 = document.querySelector("h2");
  h2.innerHTML = `${temperature}Â°F`;

  celsiusLink.classList.add("active");
  fahrenheitLink.classList.remove("active");

  celsiusTemperature = response.data.main.temp;
}
function displayFahrenheitTemp(event) {
  event.preventDefault();
  let tempElement = document.querySelector("#temperature");
  // remove the active class to Celsius and add to fahrenheit
  celsiusLink.classList.remove("active");
  fahrenheitLink.classList.add("active");
  fahrenheitTemp = (celsiusTemperature * 9) / 5 + 32;
  tempElement.innerHTML = Math.round(fahrenheitTemp);
}

function displayCelsiusTemp(event) {
  event.preventDefault();
  let tempElement = document.querySelector("#temperature");
  celsiusLink.classList.add("active");
  fahrenheitLink.classList.remove("active");
  tempElement.innerHTML = Math.round(celsiusTemperature);
}
let celsiusTemperature = null;

let fahrenheitLink = document.querySelector("#fahrenheit-link");
fahrenheitLink.addEventListener("click", displayFahrenheitTemp);

let celsiusLink = document.querySelector("#celsius-link");
celsiusLink.addEventListener("click", displayCelsiusTemp);

function displayPosition(position) {
  let apiKey = "bf54175800a55e59e6c4d6461deeef12";
  let latitude = position.coords.latitude;
  let longitude = position.coords.longitude;
  let apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=imperial&appid=${apiKey}`;
  axios.get(apiUrl).then(showTemperature);
}

function showLocation(event) {
  event.preventDefault();
  navigator.geolocation.getCurrentPosition(displayPosition);
}

let currentLocation = document.querySelector(".current-location");
currentLocation.addEventListener("click", showLocation);

function displayForecast() {

let forecastElement = document.querySelector("#forecast");

let forecastHTML = `<div class=â€œrowâ€>`;
let days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
days.forEach(function (day){
forecastHTML = forecastHTML+
` <div class="col-2">
<div class="weather-forecast-dateâ€>${day}</div>
<img src="http://openweathermap.org/img/wn/50d@2x.png"
                  alt=""
                  width="42"
                />
<div class="weather-forecast-temperature">
  <span class="weather-forecast-temperature-max">79Â°F</span>    
  <span class="weather-forecast-temperature-min">49Â°F</span>  
   </div>
   </div> `;
} ) ;
forecastHTML = forecastHTML+ ` </div> `;

forecastElement.innerHTML = forecastHTML;}
</script>   

  <br>
  
  <footer><center><small>
      <a href="https://github.com/yippieeitsbri/weatherapp" target="_blank">Open-source code</a> by bri schmer
    
  </small></center></footer>
  
</body>
</html>